{% extends "@PlatypusBundle/Resources/views/Default/layout.html.twig" %}

{% block title %}
    Login
{% endblock %}

{% block content %}
{% for message in app.flashes('notice') %}
        <div class="flash-notice">
            {{ message }}
        </div>
    {% endfor %}

    {% if error.messageKey is defined  %}
        <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}
    {% if is_granted('IS_AUTHENTICATED_FULLY') == false %}
        <form class="form-signin" action="{{ path('platypus_login') }}" 
              method="post">
            <h2 class="form-signin-heading">Please sign in</h2>
            <div class="form-group">
                <label class="sr-only" for="username">Username:</label>
                <input class="form-control" type="text" id="username" 
                       name="_username" placeholder="User name" 
                       value="{{ last_username }}" />
            </div>
            <div class="form-group">
                <label class="sr-only" for="password">Password:</label>
                <input class="form-control" type="password" id="password"
                       placeholder="password" name="_password" />
            </div>
            <input type="hidden" name="_target_path" value="/login" />

            <div class="checkbox">
                <label>
                    <input type="checkbox" value="remember-me" name="_remember_me" >Remember me
                </label>
            </div>

            <button class="btn btn-lg btn-primary btn-block" 
                    type="submit">Sign in</button>
        </form>
    {% else %}

    {% endif %}


{% endblock %}